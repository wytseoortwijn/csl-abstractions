<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Assertions</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Assertions</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HahnBase</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Heaps</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">HeapSolver</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">List</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Permissions</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">PermSolver</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Permutation</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">PermutationTactic</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Prelude</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Process</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ProcMap</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ProcMapSolver</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Programs</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">QArith</span> <span class="id" title="var">Qcanon</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Assertions</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <span class="id" title="var">Assertions</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">domains</span> : <span class="id" title="var">Domains</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">heaps</span> : <span class="id" title="var">Heaps</span> <span class="id" title="var">domains</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">hsolver</span> : <span class="id" title="var">HeapSolver</span> <span class="id" title="var">domains</span> <span class="id" title="var">heaps</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">procs</span> : <span class="id" title="var">Processes</span> <span class="id" title="var">domains</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">procmaps</span> : <span class="id" title="var">ProcMaps</span> <span class="id" title="var">domains</span> <span class="id" title="var">heaps</span> <span class="id" title="var">procs</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">progs</span> : <span class="id" title="var">Programs</span> <span class="id" title="var">domains</span> <span class="id" title="var">heaps</span> <span class="id" title="var">procs</span> <span class="id" title="var">procmaps</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">pmsolver</span> : <span class="id" title="var">ProcMapSolver</span> <span class="id" title="var">domains</span> <span class="id" title="var">heaps</span> <span class="id" title="var">procs</span> <span class="id" title="var">procmaps</span>).<br/>

<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">domains</span> <span class="id" title="var">heaps</span> <span class="id" title="var">hsolver</span> <span class="id" title="var">procs</span> <span class="id" title="var">procmaps</span> <span class="id" title="var">pmsolver</span> <span class="id" title="var">progs</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab2"></a><h2 class="section">Statics</h2>

<div class="paragraph"> </div>

 Below is the syntax of assertions of the program logic. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;| <span class="id" title="var">Aplain</span>(<span class="id" title="var">B</span> : <span class="id" title="var">Cond</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Aex</span>(<span class="id" title="var">A</span> : <span class="id" title="var">Val</span> -&gt; <span class="id" title="var">Assn</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Adisj</span>(<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Astar</span>(<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Awand</span>(<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span>(<span class="id" title="var">t</span> : <span class="id" title="var">PointsToType</span>)(<span class="id" title="var">q</span> : <span class="id" title="var">Qc</span>)(<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="var">Expr</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Aproc</span>(<span class="id" title="var">x</span> : <span class="id" title="var">Var</span>)(<span class="id" title="var">q</span> : <span class="id" title="var">Qc</span>)(<span class="id" title="var">P</span> : <span class="id" title="var">HProc</span>)(<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">ProcVar</span>)(<span class="id" title="var">f</span> : <span class="id" title="var">ProcVar</span> -&gt; <span class="id" title="var">Expr</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Abisim</span>(<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">HProc</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Aterm</span>(<span class="id" title="var">P</span> : <span class="id" title="var">HProc</span>)<br/>
<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;<span class="id" title="var">PointsToType</span> := <span class="id" title="var">PTTstd</span> | <span class="id" title="var">PTTproc</span> | <span class="id" title="var">PTTact</span>.<br/>

<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "Assn_rect".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "Assn_ind".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "Assn_rec".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "Assn_sind".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "PointsToType_rect".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "PointsToType_ind".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "PointsToType_rec".<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="keyword">Search</span> <span class="id" title="var">Blacklist</span> "PointsToType_sind".<br/>

<br/>
</div>

<div class="doc">
Below is a helper tactic for doing induction
    on the structure of assertions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">assn_induction</span> <span class="id" title="var">A</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">A</span> <span class="id" title="keyword">as</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">B</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A</span> <span class="id" title="var">IH</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A1</span> <span class="id" title="var">IH1</span> <span class="id" title="var">A2</span> <span class="id" title="var">IH2</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A1</span> <span class="id" title="var">IH1</span> <span class="id" title="var">A2</span> <span class="id" title="var">IH2</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A1</span> <span class="id" title="var">IH1</span> <span class="id" title="var">A2</span> <span class="id" title="var">IH2</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">P</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="var">Q</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span><br/>
&nbsp;&nbsp;].<br/>

<br/>
</div>

<div class="doc">
Some sugar. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Atrue</span> : <span class="id" title="var">Assn</span> := <span class="id" title="var">Aplain</span> (<span class="id" title="var">Bconst</span> <span class="id" title="var">true</span>).<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Afalse</span> : <span class="id" title="var">Assn</span> := <span class="id" title="var">Aplain</span> (<span class="id" title="var">Bconst</span> <span class="id" title="var">false</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Apointsto_procact</span> (<span class="id" title="var">q</span> : <span class="id" title="var">Qc</span>)(<span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <span class="id" title="var">Expr</span>) : <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="var">Qc_eq_dec</span> <span class="id" title="var">q</span> 1<br/>
&nbsp;&nbsp;<span class="id" title="keyword">then</span> <span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab3"></a><h3 class="section">Iterated separating conjunction</h3>

<div class="paragraph"> </div>

 The iterated separating conjunction is derived from the syntax. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">Aiter</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>) : <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">xs</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">nil</span> =&gt; <span class="id" title="var">Atrue</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">A</span> :: <span class="id" title="var">xs'</span> =&gt; <span class="id" title="var">Astar</span> <span class="id" title="var">A</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Two helper definitions for iterated separating conjunctions
    over points-to ownership predicates: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ApointstoIter</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">t</span> : <span class="id" title="var">PointsToType</span>) : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span> =&gt; <span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>)) <span class="id" title="var">xs</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ApointstoIter_procact</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span> =&gt; <span class="id" title="var">Apointsto_procact</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>)) <span class="id" title="var">xs</span>.<br/>

<br/>
</div>

<div class="doc">
Below are several properties of iterated separating conjunctions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_cons</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter</span> (<span class="id" title="var">x</span> :: <span class="id" title="var">xs</span>) <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span> =<br/>
&nbsp;&nbsp;<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> (<span class="id" title="var">F</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>) :: <span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_app</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">t</span> : <span class="id" title="var">PointsToType</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span> ++ <span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span> =<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>) <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_procact_app</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> ++ <span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> =<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter_procact</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>) <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_ext_in</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> <span class="id" title="var">fq'</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f1'</span> <span class="id" title="var">f2</span> <span class="id" title="var">f2'</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = <span class="id" title="var">fq'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">f1</span> <span class="id" title="var">x</span> = <span class="id" title="var">f1'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">f2</span> <span class="id" title="var">x</span> = <span class="id" title="var">f2'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span> = <span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq'</span> <span class="id" title="var">f1'</span> <span class="id" title="var">f2'</span> <span class="id" title="var">t</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_procact_ext_in</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> <span class="id" title="var">fq'</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f1'</span> <span class="id" title="var">f2</span> <span class="id" title="var">f2'</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = <span class="id" title="var">fq'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">f1</span> <span class="id" title="var">x</span> = <span class="id" title="var">f1'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">f2</span> <span class="id" title="var">x</span> = <span class="id" title="var">f2'</span> <span class="id" title="var">x</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> = <span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq'</span> <span class="id" title="var">f1'</span> <span class="id" title="var">f2'</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab4"></a><h3 class="section">Free variables</h3>

<div class="paragraph"> </div>

 The predicate <span class="inlinecode"><span class="id" title="var">assn_fv</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> determines whether the
    <i>program</i> variable <span class="inlinecode"><span class="id" title="var">x</span></span> occurs freely in <span class="inlinecode"><span class="id" title="var">A</span></span>.
    The definition of <span class="inlinecode"><span class="id" title="var">assn_fv</span></span> is as expected. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">assn_fv</span> (<span class="id" title="var">A</span> : <span class="id" title="var">Assn</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">Var</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">A</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aplain</span> <span class="id" title="var">B</span> =&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">cond_fv</span> <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aex</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">assn_fv</span> (<span class="id" title="var">A</span> <span class="id" title="var">v</span>) <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Awand</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt; <span class="id" title="var">assn_fv</span> <span class="id" title="var">A1</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">assn_fv</span> <span class="id" title="var">A2</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> =&gt; <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">expr_fv</span> <span class="id" title="var">E1</span>) \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">expr_fv</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aproc</span> <span class="id" title="var">y</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> =&gt; <span class="id" title="var">x</span> = <span class="id" title="var">y</span> \/ <span class="id" title="var">hproc_fv</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">expr_map_fv</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">hproc_fv</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> \/ <span class="id" title="var">hproc_fv</span> <span class="id" title="var">Q</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aterm</span> <span class="id" title="var">P</span> =&gt; <span class="id" title="var">hproc_fv</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Several useful properties related to free variables: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_fv_iter</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">assn_fv</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) <span class="id" title="var">x</span> &lt;-&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">A</span>, <span class="id" title="var">In</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span> /\ <span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_fv_ApointstoIter</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">assn_fv</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)) <span class="id" title="var">x</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">e</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">e</span> <span class="id" title="var">xs</span> /\ (<span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">expr_fv</span> (<span class="id" title="var">f1</span> <span class="id" title="var">e</span>)) \/ <span class="id" title="var">In</span> <span class="id" title="var">x</span> (<span class="id" title="var">expr_fv</span> (<span class="id" title="var">f2</span> <span class="id" title="var">e</span>))).<br/>

<br/>
</div>

<div class="doc">
<a name="lab5"></a><h3 class="section">Substitution</h3>

<div class="paragraph"> </div>

 The operation <span class="inlinecode"><span class="id" title="var">assn_subst</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> substitutes every
    occurence of the <i>program</i> variable <span class="inlinecode"><span class="id" title="var">x</span></span> by <span class="inlinecode"><span class="id" title="var">E</span></span>
    in the assertion <span class="inlinecode"><span class="id" title="var">A</span></span>. The definition of <span class="inlinecode"><span class="id" title="var">assn_subst</span></span>
    is as expected. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">assn_subst</span> (<span class="id" title="var">x</span> : <span class="id" title="var">Var</span>)(<span class="id" title="var">E</span> : <span class="id" title="var">Expr</span>)(<span class="id" title="var">A</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">A</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aplain</span> <span class="id" title="var">B</span> =&gt; <span class="id" title="var">Aplain</span> (<span class="id" title="var">cond_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aex</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="var">Aex</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> =&gt; <span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> (<span class="id" title="var">A</span> <span class="id" title="var">v</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt; <span class="id" title="var">Adisj</span> (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A1</span>) (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt; <span class="id" title="var">Astar</span> (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A1</span>) (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Awand</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt; <span class="id" title="var">Awand</span> (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A1</span>) (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> =&gt; <span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> (<span class="id" title="var">expr_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">E1</span>) (<span class="id" title="var">expr_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aproc</span> <span class="id" title="var">y</span> <span class="id" title="var">q</span> <span class="id" title="var">P</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span> =&gt; <span class="id" title="var">Aproc</span> <span class="id" title="var">y</span> <span class="id" title="var">q</span> (<span class="id" title="var">hproc_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>) <span class="id" title="var">xs</span> (<span class="id" title="var">expr_subst_map</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> =&gt; <span class="id" title="var">Abisim</span> (<span class="id" title="var">hproc_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>) (<span class="id" title="var">hproc_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aterm</span> <span class="id" title="var">P</span> =&gt; <span class="id" title="var">Aterm</span> (<span class="id" title="var">hproc_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Existential quantification as is written in the paper
    (with a variable instead of a mapping) can be defined
    using the definition of substitution. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Aexists</span> (<span class="id" title="var">x</span> : <span class="id" title="var">Var</span>)(<span class="id" title="var">A</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="var">Assn</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Aex</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">v</span> =&gt; <span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> (<span class="id" title="var">Econst</span> <span class="id" title="var">v</span>) <span class="id" title="var">A</span>).<br/>

<br/>
</div>

<div class="doc">
The substitution of any variable not occuring in the
    targetted assertion does not change the assertion. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_subst_pres</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span>, ~ <span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span> = <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab6"></a><h2 class="section">Dynamics</h2>

<div class="paragraph"> </div>

 The following satisfaction relation, <span class="inlinecode"><span class="id" title="var">sat</span></span>, defines
    the semantic meaning of assertions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">sat</span> (<span class="id" title="var">ph</span> : <span class="id" title="var">PermHeap</span>)(<span class="id" title="var">pm</span> : <span class="id" title="var">ProcMap</span>)(<span class="id" title="var">s</span> <span class="id" title="var">g</span> : <span class="id" title="var">Store</span>)(<span class="id" title="var">A</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">A</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aplain</span> <span class="id" title="var">B</span> =&gt; <span class="id" title="var">cond_eval</span> <span class="id" title="var">B</span> <span class="id" title="var">s</span> = <span class="id" title="var">true</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aex</span> <span class="id" title="var">A</span> =&gt; <span class="id" title="tactic">exists</span> <span class="id" title="var">v</span>, <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">A</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> \/ <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phUnion</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> = <span class="id" title="var">ph</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmDisj</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmBisim</span> (<span class="id" title="var">pmUnion</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span>) <span class="id" title="var">pm</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Awand</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph</span> <span class="id" title="var">ph'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmDisj</span> <span class="id" title="var">pm</span> <span class="id" title="var">pm'</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm'</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phUnion</span> <span class="id" title="var">ph</span> <span class="id" title="var">ph'</span>) (<span class="id" title="var">pmUnion</span> <span class="id" title="var">pm</span> <span class="id" title="var">pm'</span>) <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E2</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">perm_valid</span> <span class="id" title="var">q</span> /\ <span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCstd</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E2</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">perm_valid</span> <span class="id" title="var">q</span> /\ <span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCproc</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> <span class="id" title="var">E2</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">perm_valid</span> <span class="id" title="var">q</span> /\ <span class="id" title="tactic">exists</span> <span class="id" title="var">v'</span>, <span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCact</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">HP</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">P</span> := <span class="id" title="var">pDehybridise</span> <span class="id" title="var">HP</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">F</span> := <span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := <span class="id" title="var">PEelem</span> <span class="id" title="var">q</span> <span class="id" title="var">P</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">c'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmeDisj</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pmeBisim</span> (<span class="id" title="var">pm</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">pmeUnion</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">bisim</span> (<span class="id" title="var">pDehybridise</span> <span class="id" title="var">P</span> <span class="id" title="var">s</span>) (<span class="id" title="var">pDehybridise</span> <span class="id" title="var">Q</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Aterm</span> <span class="id" title="var">P</span> =&gt; <span class="id" title="var">pterm</span> (<span class="id" title="var">pDehybridise</span> <span class="id" title="var">P</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Process maps can always be replaced by bisimilar ones
    (and therefore also by equal ones, since process map equality
    is a subrelation of bisimilarity). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_procmap_bisim</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">pmBisim</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">sat</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">pmBisim</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">eq</span> ==&gt; <span class="id" title="var">iff</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">sat_bisim_mor</span>.<br/>

<br/>
</div>

<div class="doc">
The following lemma relates substitution in assertions
    with the satisfiability of that assertion. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_subst</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">A</span>) &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> (<span class="id" title="var">sUpdate</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E</span> <span class="id" title="var">s</span>)) <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
The satisfiability of any assertion <span class="inlinecode"><span class="id" title="var">A</span></span> only depends
    on the variables occuring freely in <span class="inlinecode"><span class="id" title="var">A</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_agree</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sAgree</span> (<span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span>) <span class="id" title="var">s1</span> <span class="id" title="var">s2</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s1</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> &lt;-&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s2</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_agree_ghost</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sAgree</span> (<span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span>) <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g1</span> <span class="id" title="var">A</span> &lt;-&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g2</span> <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
Satisfiability of any assertion <span class="inlinecode"><span class="id" title="var">A</span></span> is insensitive to
    updating variables not occuring freely in <span class="inlinecode"><span class="id" title="var">A</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_update</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> (<span class="id" title="var">sUpdate</span> <span class="id" title="var">s</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>) <span class="id" title="var">g</span> <span class="id" title="var">A</span> &lt;-&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_update_ghost</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">assn_fv</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> (<span class="id" title="var">sUpdate</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>) <span class="id" title="var">A</span> &lt;-&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
Satisfiability of assertions is monotonic with respect
    to permission heaps and process maps. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">pmDisj</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phUnion</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>) (<span class="id" title="var">pmUnion</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span>) <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
The satisfiability of iterated separating conjunctions
    is insensitive to permutations. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_permut</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">Permutation</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>).<br/>

<br/>
</div>

<div class="doc">
The satisfiability of points-to predicates is independent of the process map. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_indep</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab7"></a><h2 class="section">Logical consequence</h2>

<div class="paragraph"> </div>

 The relation <span class="inlinecode"><span class="id" title="var">entails</span></span> defines <i>semantic consequence</i>
    of two assertions. That is, <span class="inlinecode"><span class="id" title="var">A</span></span> is a logical consequence of <span class="inlinecode"><span class="id" title="var">A'</span></span>
    if there is no model that distinguishes <span class="inlinecode"><span class="id" title="var">A</span></span> from <span class="inlinecode"><span class="id" title="var">A'</span></span>. 
<div class="paragraph"> </div>

 Logical equivalence <span class="inlinecode"><span class="id" title="var">aEquiv</span></span> of any two assertions
    is defined to be a logical entailment in both directions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">aEntails</span> (<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt; <span class="id" title="var">pmValid</span> <span class="id" title="var">pm</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">aEntails_rev</span> (<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">aEquiv</span> (<span class="id" title="var">A1</span> <span class="id" title="var">A2</span> : <span class="id" title="var">Assn</span>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> /\ <span class="id" title="var">aEntails</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;A1  A2":=(<span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">only</span> <span class="id" title="var">printing</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>
<span class="id" title="keyword">Notation</span> &quot;A1  A2":=(<span class="id" title="var">aEntails_rev</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">only</span> <span class="id" title="var">printing</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>
<span class="id" title="keyword">Notation</span> &quot;A1  A2":=(<span class="id" title="var">aEquiv</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">only</span> <span class="id" title="var">printing</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 80).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">aEntails_flip</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> &lt;-&gt; <span class="id" title="var">aEntails_rev</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>.<br/>
 
<br/>
</div>

<div class="doc">
Logical consequence is a consequence relation. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_refl</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">aEntails</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_trans</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">aEntails</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_preorder</span> : <span class="id" title="var">PreOrder</span> <span class="id" title="var">aEntails</span>.<br/>
 
<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_rev_refl</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">aEntails_rev</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_rev_trans</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">aEntails_rev</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_rev_preorder</span> : <span class="id" title="var">PreOrder</span> <span class="id" title="var">aEntails_rev</span>.<br/>
 
<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">aEntails_refl</span> <span class="id" title="var">aEntails_rev_refl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
Logical equivalence is an equivalence relation. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">aEquiv_refl</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">aEquiv</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEquiv_symm</span> : <span class="id" title="var">Symmetric</span> <span class="id" title="var">aEquiv</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEquiv_trans</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">aEquiv</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEquiv_eq</span> : <span class="id" title="var">Equivalence</span> <span class="id" title="var">aEquiv</span>.<br/>
 
<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">aEquiv_refl</span> : <span class="id" title="var">core</span>.<br/>

<br/>
</div>

<div class="doc">
Logical equivalence is a subrelation of entailment. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_subrel</span> : <span class="id" title="var">subrelation</span> <span class="id" title="var">aEquiv</span> <span class="id" title="var">aEntails</span>.<br/>
 <span class="id" title="keyword">Instance</span> <span class="id" title="var">aEntails_rev_subrel</span> : <span class="id" title="var">subrelation</span> <span class="id" title="var">aEquiv</span> <span class="id" title="var">aEntails_rev</span>.<br/>
 
<br/>
</div>

<div class="doc">
Logical consequence is a congruence for all
    connectives of the program logic. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Adisj</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEntails</span> ==&gt; <span class="id" title="var">aEntails</span> ==&gt; <span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Adisj_entails_mor</span>.<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Astar</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEntails</span> ==&gt; <span class="id" title="var">aEntails</span> ==&gt; <span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Astar_entails_mor</span>.<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Awand</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEntails_rev</span> ==&gt; <span class="id" title="var">aEntails</span> ==&gt; <span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Awand_entails_mor</span>.<br/>

<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Adisj</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Adisj_equiv_mor</span>.<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Astar</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Astar_equiv_mor</span>.<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Awand</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span> ==&gt; <span class="id" title="var">aEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Awand_equiv_mor</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab8"></a><h3 class="section">Weakening rule</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_combine</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">pmDisj</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phUnion</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>) (<span class="id" title="var">pmUnion</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span>) <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span>.<br/>

<br/>
</div>

<div class="doc">
The following rule shows that our separation logic is <i>intuitionistic</i>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A1</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab9"></a><h3 class="section">Separating conjunction</h3>

<div class="paragraph"> </div>

 Soundness of the axioms of associativity and commutativity. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_assoc_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_assoc_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_assoc_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_assoc_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_assoc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEquiv</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_comm</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_comm</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_comm_equiv</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEquiv</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>).<br/>
 
<br/>
</div>

<div class="doc">
One can always forget about resources. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">assn_weaken_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A2</span>.<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">assn_weaken_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A1</span>.<br/>

<br/>
</div>

<div class="doc">
One can always introduce a <span class="inlinecode"><span class="id" title="var">Atrue</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_true</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt; <span class="id" title="var">pmValid</span> <span class="id" title="var">pm</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> -&gt; <span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> <span class="id" title="var">Atrue</span>).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Astar_true</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> <span class="id" title="var">Atrue</span>).<br/>

<br/>
</div>

<div class="doc">
The following properties allow "swapping" separate resources. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_swap_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Astar_swap_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_star_swap_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>) <span class="id" title="var">A2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Astar_swap_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span>) (<span class="id" title="var">Astar</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>) <span class="id" title="var">A2</span>).<br/>

<br/>
</div>

<div class="doc">
A property that combines logical entailment with
    separating conjunction. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">Astar_add_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span> -&gt; <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>).<br/>
 <span class="id" title="keyword">Corollary</span> <span class="id" title="var">Astar_add_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span> -&gt; <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A2</span> <span class="id" title="var">A1</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A3</span> <span class="id" title="var">A1</span>).<br/>
 
<br/>
</div>

<div class="doc">
Separating conjunction distributes over disjunction. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Astar_disj_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) (<span class="id" title="var">Adisj</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Astar_disj_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Adisj</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>)) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Astar_disj</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEquiv</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>)) (<span class="id" title="var">Adisj</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A3</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab10"></a><h3 class="section">Iterated separating conjunction</h3>

<div class="paragraph"> </div>

 The following properties cover entailment rules
    with iterated separating conjunctions. 
<div class="paragraph"> </div>

 First, iterated separating conjunctions are insensitive
    to permutation. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_permut</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>, <span class="id" title="var">Permutation</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> -&gt; <span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>).<br/>
<span class="id" title="keyword">Add</span> <span class="id" title="var">Parametric</span> <span class="id" title="var">Morphism</span> : <span class="id" title="var">Aiter</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">with</span> <span class="id" title="var">signature</span> @<span class="id" title="var">Permutation</span> <span class="id" title="var">Assn</span> ==&gt; <span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> <span class="id" title="var">Aiter_permut_mor</span>.<br/>
 
<br/>
</div>

<div class="doc">
Iterated separating conjunction allows
    "pulling out" the head resource (or unfolding once). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_cons_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)).<br/>
 <span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_cons_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)).<br/>
 <span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_cons_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>)).<br/>
 <span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_cons_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)) (<span class="id" title="var">Astar</span> <span class="id" title="var">A</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>)).<br/>
 
<br/>
</div>

<div class="doc">
Two iterated separating conjunctions can be combined
    into a single one. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_add_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_add_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_add_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt; <span class="id" title="var">pmValid</span> <span class="id" title="var">pm</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_add_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>)) (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>) (<span class="id" title="var">Aiter</span> <span class="id" title="var">ys</span>)).<br/>

<br/>
</div>

<div class="doc">
Binary separating conjunctions that occur inside
    iterated separating conjuncations can always
    be eliminated (and also introduced). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_star_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A1</span> :: <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_star_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A1</span> :: <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_star_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A1</span> :: <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aiter_star_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A1</span> :: <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> :: <span class="id" title="var">xs</span>)).<br/>

<br/>
</div>

<div class="doc">
Iterated resources can always be forgotten. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">Assn</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>).<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">Aiter_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">A</span> :: <span class="id" title="var">xs</span>)) (<span class="id" title="var">Aiter</span> <span class="id" title="var">xs</span>).<br/>

<br/>
</div>

<div class="doc">
Iterated heap ownership assertions
    (i.e., <span class="inlinecode"><span class="id" title="var">ApointstoIter</span></span> and <span class="inlinecode"><span class="id" title="var">ApointstoIter_procact</span></span>)
    are insensitive to permutations, likewise to
    ordinary iterated separating conjunctions. 
<div class="paragraph"> </div>

 Note, some helper lemmas are needed in order to prove this. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_In_l</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">T</span>, { <span class="id" title="var">x</span> = <span class="id" title="var">y</span> } + { <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> }) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Assn</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> (<span class="id" title="var">removeFirst</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>)))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_In_l</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">T</span>, { <span class="id" title="var">x</span> = <span class="id" title="var">y</span> } + { <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> }) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Assn</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span>)) (<span class="id" title="var">Astar</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> (<span class="id" title="var">removeFirst</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>)))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_In_r</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">T</span>, { <span class="id" title="var">x</span> = <span class="id" title="var">y</span> } + { <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> }) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Assn</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> (<span class="id" title="var">removeFirst</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>)))) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_In_r</span> {<span class="id" title="var">T</span>} (<span class="id" title="var">eq_dec</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">T</span>, { <span class="id" title="var">x</span> = <span class="id" title="var">y</span> } + { <span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span> }) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Assn</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> (<span class="id" title="var">removeFirst</span> <span class="id" title="var">eq_dec</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>)))) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">map</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_ApointstoIter_permut</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">Permutation</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_procact_iter_permut</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">Permutation</span> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab11"></a><h3 class="section">Plain assertions</h3>

<div class="paragraph"> </div>

 <i>Introduction</i> and <i>elimination</i> rules for plain assertions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Atrue_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>, <span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> <span class="id" title="var">Atrue</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Afalse_elim</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>, <span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> <span class="id" title="var">Afalse</span> -&gt; <span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_plain_tauto</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aplain</span> (<span class="id" title="var">Beq</span> <span class="id" title="var">E</span> <span class="id" title="var">E</span>)) <span class="id" title="var">Atrue</span> /\<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">Atrue</span> (<span class="id" title="var">Aplain</span> (<span class="id" title="var">Beq</span> <span class="id" title="var">E</span> <span class="id" title="var">E</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aplain_equiv</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEquiv</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Aplain</span> <span class="id" title="var">B2</span>) &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">s</span>, <span class="id" title="var">cond_eval</span> <span class="id" title="var">B1</span> <span class="id" title="var">s</span> = <span class="id" title="var">cond_eval</span> <span class="id" title="var">B2</span> <span class="id" title="var">s</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab12"></a><h3 class="section">Existential quantifiers</h3>

<div class="paragraph"> </div>

 Introduction rule for existential quantification. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Aexists_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> (<span class="id" title="var">assn_subst</span> <span class="id" title="var">x</span> (<span class="id" title="var">Econst</span> <span class="id" title="var">v</span>) <span class="id" title="var">A2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Aexists</span> <span class="id" title="var">x</span> <span class="id" title="var">A2</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab13"></a><h3 class="section">Disjunction</h3>

<div class="paragraph"> </div>

 Standard elimination rules for disjunction. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_elim_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_elim_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">A2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Adisj_elim_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> <span class="id" title="var">A1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>).<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Adisj_elim_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> <span class="id" title="var">A2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>).<br/>

<br/>
</div>

<div class="doc">
Disjunction is idempotent. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_idemp</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span>) /\ <span class="id" title="var">aEntails</span> (<span class="id" title="var">Adisj</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span>) <span class="id" title="var">A</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h3 class="section">Magic wand</h3>

<div class="paragraph"> </div>

 Introduction and elimination rules for magic wands. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Awand_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A3</span> -&gt; <span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Awand</span> <span class="id" title="var">A2</span> <span class="id" title="var">A3</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Awand_elim</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A1</span> (<span class="id" title="var">Awand</span> <span class="id" title="var">A</span> <span class="id" title="var">A'</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">A2</span> <span class="id" title="var">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> <span class="id" title="var">A1</span> <span class="id" title="var">A2</span>) <span class="id" title="var">A'</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h3 class="section">Heap ownership predicates</h3>

<div class="paragraph"> </div>

 The following rules cover points-to assertions. 
<div class="paragraph"> </div>

 Heap ownership predicates with invalid
    fractional permissions are meaningless. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Apointsto_valid</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">perm_valid</span> <span class="id" title="var">q</span> -&gt; <span class="id" title="var">aEntails</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) <span class="id" title="var">Afalse</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_entire</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">t</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phcEntire</span> (<span class="id" title="var">ph</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_perm_full</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">l</span> (<span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phcEntire</span> (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
Heap ownership predicates of different types cannot coexist
    if they target the same heap location. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_diff</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">t1</span> &lt;&gt; <span class="id" title="var">t2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t1</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t2</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)) <span class="id" title="var">Afalse</span>.<br/>

<br/>
</div>

<div class="doc">
Heap ownership predicates may be <i>split</i>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_split_std</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_split_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_split_act</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Apointsto_split</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>)).<br/>

<br/>
</div>

<div class="doc">
Heap ownership predicates may be merged. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_merge_std</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_merge_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Apointsto_merge_act</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">Apointsto_merge</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q1</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q2</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
</div>

<div class="doc">
Below are the rules for 'process-action' ownership predicates,
    which allow using such predicates as abbreviations
    for process- and action ownership predicates 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_proc_procact_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> &lt;&gt; 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Apointsto_procact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_proc_procact_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> &lt;&gt; 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto_procact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_act_procact_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Apointsto_procact</span> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">assn_act_procact_r</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="var">Apointsto_procact</span> 1 <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_proc_procact_l</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> &lt;&gt; 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_proc_procact_r</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> &lt;&gt; 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_act_procact_l</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Aiter_act_procact_r</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ApointstoIter_procact_split</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> &lt;&gt; 1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>) <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>))).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ApointstoIter_procact_merge</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> &lt;&gt; 1) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span>, <span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">ys</span> -&gt; <span class="id" title="var">fq</span> <span class="id" title="var">x</span> = 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> (<span class="id" title="var">xs</span> ++ <span class="id" title="var">ys</span>) <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>)).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">ApointstoIter_procact_partition</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> <span class="id" title="var">ys1</span> <span class="id" title="var">ys2</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">T</span> =&gt; <span class="id" title="keyword">if</span> <span class="id" title="var">Qc_eq_dec</span> (<span class="id" title="var">fq</span> <span class="id" title="var">x</span>) 1 <span class="id" title="keyword">then</span> <span class="id" title="var">false</span> <span class="id" title="keyword">else</span> <span class="id" title="var">true</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">partition</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span> = (<span class="id" title="var">ys1</span>, <span class="id" title="var">ys2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter_procact</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys1</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">ys2</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>))).<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h3 class="section">Process ownership predicates</h3>

<div class="paragraph"> </div>

 Process ownership predicates with invalid
    fractional permissions are meaningless. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_proc_valid</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">P</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">perm_valid</span> <span class="id" title="var">q</span> -&gt; <span class="id" title="var">aEntails</span> (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">P</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>) <span class="id" title="var">Afalse</span>.<br/>

<br/>
</div>

<div class="doc">
Processes may always be replaced by bisimilar ones. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">hbisim</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">P1</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>) (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
Processes ownership may always be split. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_proc_split</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">x</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) (<span class="id" title="var">HPpar</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) <span class="id" title="var">xs</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q1</span> <span class="id" title="var">P1</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>) (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q2</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>)).<br/>

<br/>
</div>

<div class="doc">
Processes ownership may always be merged. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_proc_merge</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">x</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Astar</span> (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q1</span> <span class="id" title="var">P1</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>) (<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q2</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) (<span class="id" title="var">HPpar</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) <span class="id" title="var">xs</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
One can always dispose of parts of an abstraction. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">assn_proc_weaken</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">x</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">perm_disj</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> (<span class="id" title="var">q1</span> + <span class="id" title="var">q2</span>) (<span class="id" title="var">HPpar</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) <span class="id" title="var">xs</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Aproc</span> <span class="id" title="var">x</span> <span class="id" title="var">q1</span> <span class="id" title="var">P1</span> <span class="id" title="var">xs</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h3 class="section">Bisimilarity</h3>

<div class="paragraph"> </div>

 Any bisimilarity from <span class="inlinecode"><span class="id" title="var">hbisim</span></span> can be introduced via <span class="inlinecode"><span class="id" title="var">Abisim</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_hbisim</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>, <span class="id" title="var">hbisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">aEntails</span> <span class="id" title="var">Atrue</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>).<br/>
 
<br/>
</div>

<div class="doc">
Bisimilarity is an equivalence relation
    with respect to separating conjunction and entailment. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_refl</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <span class="id" title="var">aEntails</span> <span class="id" title="var">Atrue</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">P</span>).<br/>
 <span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_symm</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q</span> <span class="id" title="var">P</span>).<br/>
 <span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_trans</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span>)) (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">R</span>).<br/>

<br/>
</div>

<div class="doc">
Bisimilarity is a congruence for all connectives. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_seq</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>)) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPseq</span> <span class="id" title="var">P1</span> <span class="id" title="var">Q1</span>) (<span class="id" title="var">HPseq</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_alt</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>)) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPalt</span> <span class="id" title="var">P1</span> <span class="id" title="var">Q1</span>) (<span class="id" title="var">HPalt</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_par</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>)) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPpar</span> <span class="id" title="var">P1</span> <span class="id" title="var">Q1</span>) (<span class="id" title="var">HPpar</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_lmerge</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P1</span> <span class="id" title="var">P2</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">Q1</span> <span class="id" title="var">Q2</span>)) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPlmerge</span> <span class="id" title="var">P1</span> <span class="id" title="var">Q1</span>) (<span class="id" title="var">HPlmerge</span> <span class="id" title="var">P2</span> <span class="id" title="var">Q2</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_sum</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">x</span>,<br/>
&nbsp;&nbsp;~ <span class="id" title="var">hproc_fv</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> -&gt;<br/>
&nbsp;&nbsp;~ <span class="id" title="var">hproc_fv</span> <span class="id" title="var">Q</span> <span class="id" title="var">x</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPsigma</span> <span class="id" title="var">x</span> <span class="id" title="var">P</span>) (<span class="id" title="var">HPsigma</span> <span class="id" title="var">x</span> <span class="id" title="var">Q</span>)).<br/>

<br/>
<span class="id" title="keyword">Corollary</span> <span class="id" title="var">aBisim_sum_alt</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> <span class="id" title="var">Atrue</span> (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPsigma</span> <span class="id" title="var">x</span> <span class="id" title="var">P</span>) (<span class="id" title="var">HPalt</span> (<span class="id" title="var">hproc_subst</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span>) (<span class="id" title="var">HPsigma</span> <span class="id" title="var">x</span> <span class="id" title="var">P</span>))).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_cond</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEquiv</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Aplain</span> <span class="id" title="var">B2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPcond</span> <span class="id" title="var">B1</span> <span class="id" title="var">P</span>) (<span class="id" title="var">HPcond</span> <span class="id" title="var">B2</span> <span class="id" title="var">Q</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_cond_true</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> <span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Aplain</span> <span class="id" title="var">B2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPcond</span> <span class="id" title="var">B2</span> <span class="id" title="var">P</span>) <span class="id" title="var">P</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_cond_false</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">B1</span> <span class="id" title="var">B2</span> <span class="id" title="var">P</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Aplain</span> <span class="id" title="var">B2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Aplain</span> <span class="id" title="var">B1</span>) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPcond</span> (<span class="id" title="var">Bnot</span> <span class="id" title="var">B2</span>) <span class="id" title="var">P</span>) <span class="id" title="var">HPdelta</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_iter</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> (<span class="id" title="var">HPiter</span> <span class="id" title="var">P</span>) (<span class="id" title="var">HPiter</span> <span class="id" title="var">Q</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_term</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Aterm</span> <span class="id" title="var">P</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> (<span class="id" title="var">HPalt</span> <span class="id" title="var">P</span> <span class="id" title="var">HPepsilon</span>)).<br/>

<br/>
</div>

<div class="doc">
Bisimilarity assertions are duplicable. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aBisim_dupl</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Astar</span> (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab18"></a><h3 class="section">Termination</h3>

<div class="paragraph"> </div>

 Termination according to <span class="inlinecode"><span class="id" title="var">pterm</span></span> can be lifted to <span class="inlinecode"><span class="id" title="var">Aterm</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aTerm_intro</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <span class="id" title="var">pterm</span> <span class="id" title="var">P</span> -&gt; <span class="id" title="var">aEntails</span> <span class="id" title="var">Atrue</span> (<span class="id" title="var">Aterm</span> (<span class="id" title="var">pHybridise</span> <span class="id" title="var">P</span>)).<br/>

<br/>
</div>

<div class="doc">
Terminating processes can always be replaced by bisimilar ones. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aTerm_bisim</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">aEntails</span> (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aterm</span> <span class="id" title="var">P</span>) (<span class="id" title="var">Abisim</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>)) (<span class="id" title="var">Aterm</span> <span class="id" title="var">Q</span>).<br/>

<br/>
</div>

<div class="doc">
Termination assertions are duplicable. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">aTerm_dupl</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span>, <span class="id" title="var">aEntails</span> (<span class="id" title="var">Aterm</span> <span class="id" title="var">P</span>) (<span class="id" title="var">Astar</span> (<span class="id" title="var">Aterm</span> <span class="id" title="var">P</span>) (<span class="id" title="var">Aterm</span> <span class="id" title="var">P</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h2 class="section">Iterated points-to predicates</h2>

<div class="paragraph"> </div>

 The properties below are for iterated heap ownership assertions. 
<div class="paragraph"> </div>

 First, the evaluation of heap ownership assertions
    in independent of any process maps: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_ApointstoIter_indep</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">pmValid</span> <span class="id" title="var">pm2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm1</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm2</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">t</span>)).<br/>

<br/>
</div>

<div class="doc">
The satisfiability of iterated points-to predicates
    implies the satisfiability of a single points-to predicate. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_sat_single_std</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">q</span> := <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCstd</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_sat_single_proc</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">q</span> := <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCproc</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_sat_single_act</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">x</span> : <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">q</span> := <span class="id" title="var">F</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">l</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f1</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">expr_eval</span> (<span class="id" title="var">f2</span> <span class="id" title="var">x</span>) <span class="id" title="var">s</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">v'</span>, <span class="id" title="var">phcLe</span> (<span class="id" title="var">PHCact</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>) (<span class="id" title="var">ph</span> <span class="id" title="var">l</span>).<br/>

<br/>
</div>

<div class="doc">
Relations between the satisfiability of assertions
    and converted heap cells: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_std</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvStd</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvProc</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_act</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvAct</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_std_mult</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvStdMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_proc_mult</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvProcMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_pointsto_conv_act_mult</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvActMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_std</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvStd</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_proc</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvProc</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_act</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvAct</span> <span class="id" title="var">ph</span> <span class="id" title="var">l</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_std_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>)(<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvStdMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_proc_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>)(<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvProcMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">sat_iter_conv_act_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">ls</span> : <span class="id" title="var">list</span> <span class="id" title="var">Val</span>)(<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> (<span class="id" title="var">phConvActMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">ls</span>) <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pointsto_conv_std</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span> <span class="id" title="var">t</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">t</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvStd</span> <span class="id" title="var">ph</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pointsto_conv_std_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvProc</span> <span class="id" title="var">ph</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pointsto_conv_proc_act</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvAct</span> <span class="id" title="var">ph</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pointsto_conv_act_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvProc</span> <span class="id" title="var">ph</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_conv_std_proc</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>),<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">F</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">T</span> =&gt; 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">xs'</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvProcMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">xs'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_conv_proc_std</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>),<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">F</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <span class="id" title="var">T</span> =&gt; 1 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">xs'</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvStdMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">xs'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_conv_proc_act</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">xs'</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvActMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">xs'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ApointstoIter_conv_act_proc</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>) <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>)(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>),<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">xs'</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ph'</span> := <span class="id" title="var">phConvProcMult</span> <span class="id" title="var">ph</span> <span class="id" title="var">xs'</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph'</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">F</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)).<br/>

<br/>
</div>

<div class="doc">
Relations between assertion satisfiability and heap disjointness,
    in combination with heap conversions. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_std</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTstd</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvStd</span> <span class="id" title="var">ph1</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>)) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_proc</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTproc</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvProc</span> <span class="id" title="var">ph1</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>)) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_act</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">q</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">phValid</span> <span class="id" title="var">ph1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Apointsto</span> <span class="id" title="var">PTTact</span> <span class="id" title="var">q</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvAct</span> <span class="id" title="var">ph1</span> (<span class="id" title="var">expr_eval</span> <span class="id" title="var">E1</span> <span class="id" title="var">s</span>)) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_std_In</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">l</span> <span class="id" title="var">ls</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvStd</span> <span class="id" title="var">ph1</span> <span class="id" title="var">l</span>) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_proc_In</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">l</span> <span class="id" title="var">ls</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvProc</span> <span class="id" title="var">ph1</span> <span class="id" title="var">l</span>) <span class="id" title="var">ph2</span> &lt;-&gt; <span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_act_In</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">l</span> : <span class="id" title="var">Val</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">In</span> <span class="id" title="var">l</span> <span class="id" title="var">ls</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvAct</span> <span class="id" title="var">ph1</span> <span class="id" title="var">l</span>) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_std_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTstd</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvStdMult</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ls</span>) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_proc_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTproc</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvProcMult</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ls</span>) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Adisj_sat_conv_act_mult</span> {<span class="id" title="var">T</span>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">xs</span> : <span class="id" title="var">list</span> <span class="id" title="var">T</span>)(<span class="id" title="var">fq</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Qc</span>)(<span class="id" title="var">f1</span> <span class="id" title="var">f2</span> : <span class="id" title="var">T</span> -&gt; <span class="id" title="var">Expr</span>) <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;<span class="id" title="var">sat</span> <span class="id" title="var">ph1</span> <span class="id" title="var">pm</span> <span class="id" title="var">s</span> <span class="id" title="var">g</span> (<span class="id" title="var">Aiter</span> (<span class="id" title="var">ApointstoIter</span> <span class="id" title="var">xs</span> <span class="id" title="var">fq</span> <span class="id" title="var">f1</span> <span class="id" title="var">f2</span> <span class="id" title="var">PTTact</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ls</span> := <span class="id" title="var">map</span> (<span class="id" title="var">expr_eval_map</span> <span class="id" title="var">f1</span> <span class="id" title="var">s</span>) <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> (<span class="id" title="var">phConvActMult</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ls</span>) <span class="id" title="var">ph2</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">phDisj</span> <span class="id" title="var">ph1</span> <span class="id" title="var">ph2</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Assertions</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>